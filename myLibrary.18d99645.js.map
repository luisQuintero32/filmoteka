{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAAaC,SAASC,eAAe,uBACrCC,EAAWF,SAASC,eAAe,qBACnCE,EAAiBH,SAASC,eAAe,oBACzCG,EAAUJ,SAASK,cAAc,qBACvC,IAAIC,EAAc,EACdC,EAAa,EAEjBL,EAASM,iBAAiB,SAE1B,WAEET,EAAWU,UAAUC,OAAO,gBAC5BR,EAASO,UAAUE,IAAI,gBACvB,MAAMC,EAAkBC,KAAKC,MAAMC,aAAaC,QAAQ,cAGxD,MAAMC,EAAgBL,EAAgBM,KAAIC,GACjCC,MACL,sCAAsCD,aAAmBtB,EAAAwB,uBACzDC,MAAKC,GAAYA,EAASC,WAS9B,SAASC,EAAYC,GACnB,IAAIC,EAAa,GACjBC,QAAQC,IAAIZ,GACTK,MAAKQ,IACJ,MAAMC,EAAoBnB,EAAgBoB,OAC1CzB,EAXc,CAAAwB,GACXA,GAAqB,GAAKE,KAAKC,KAAKH,EAAoB,IAAM,EAUpDI,CAAYJ,GACzB,MAAMK,GAAK,EAAAC,EAAAC,eAAcZ,EAAanB,GACtCH,EAAQmC,UAAYH,EAEpB,MACMI,EAA6B,IAAhBd,EAAoB,EADtB,IAC2BA,EAAc,GACpDe,EAAWR,KAAKS,IAFL,GAEShB,EAAwBI,EAAWE,QAE7D,IAAK,IAAIW,EAAIH,EAAYG,EAAIF,EAAUE,IAAK,CAC1C,MAAMC,EAAOd,EAAWa,GACE,KAAtBC,EAAKC,eACPD,EAAKC,aAAe,sBAEtB,MACMC,EAAc,GADC,oCACqBF,EAAKG,cACzCC,EAAaJ,EAAKK,OAAO/B,KAAIgC,GAASA,EAAMC,OAAMC,KAAK,OACvDC,EAAY,oHAGaT,EAAKU,sFACUR,WAAqBF,EAAKW,yLAIxCX,EAAKW,qGAG3BP,OAAgB,IAAIQ,KAAKZ,EAAKC,cAAcY,uIAMtD9B,GAAc0B,C,CAGhBlD,EAAeoC,UAAYZ,CAAU,IAEtC+B,OAAMC,GAASC,QAAQD,MAAMA,I,CAsClC,SAASE,IACoB7D,SAASC,eAAe,gBAChC6D,UAAYxD,C,CArFjCmB,EAAY,GA6DZrB,EAAQI,iBAAiB,SAbzB,SAAyBuD,GACvB,GAA6B,OAAzBA,EAAMC,OAAOC,QAAkB,CACjC,MAAMC,EAAeH,EAAMC,OAAOF,UAC5BK,EAAkBC,SAASF,GACZ,QAAjBA,IAEF5D,EAAc6D,EACdJ,EAAMM,kBACN5C,EAAYnB,G,KAOlBN,SACGC,eAAe,sBACfO,iBAAiB,SAAS8D,UACrBhE,EAAc,IAChBA,UACMmB,EAAY2C,SAAS9D,IAC3BuD,I,IAIN7D,SACGC,eAAe,sBACfO,iBAAiB,SAAS8D,UACrBhE,EAAcC,IAChBD,UACMmB,EAAY2C,SAAS9D,IAC3BuD,EAAsBO,SAAS9D,I","sources":["src/queue.js"],"sourcesContent":["import { API_KEY } from './config';\nimport { generatePages } from './pagination';\n\nconst watchedBtn = document.getElementById('watched-movies--btn');\nconst queueBtn = document.getElementById('queue-movies--btn');\nconst queueContainer = document.getElementById('movies-container');\nconst ulPages = document.querySelector('.pagination__page');\nlet currentPage = 1;\nlet totalPages = 1;\n\nqueueBtn.addEventListener('click', renderQueueMovies);\n\nfunction renderQueueMovies() {\n\n  watchedBtn.classList.remove('current--btn');\n  queueBtn.classList.add('current--btn')\n  const queueMoviesList = JSON.parse(localStorage.getItem('queueList'));\n  let moviesHTML = '';\n\n  const fetchPromises = queueMoviesList.map(movieID => {\n    return fetch(\n      `https://api.themoviedb.org/3/movie/${movieID}?api_key=${API_KEY}&language=en`\n    ).then(response => response.json());\n  });\n\n  const total_pages = queueMoviesLength => {\n    return queueMoviesLength >= 20 ? Math.ceil(queueMoviesLength / 20) : 1;\n  };\n\n  fetchMovies(1);\n\n  function fetchMovies(currentPage) {\n    let moviesHTML = '';\n    Promise.all(fetchPromises)\n      .then(moviesData => {\n        const queueMoviesLength = queueMoviesList.length;\n        totalPages = total_pages(queueMoviesLength);\n        const li = generatePages(currentPage, totalPages);\n        ulPages.innerHTML = li;\n\n        const pageSize = 20;\n        const startIndex = currentPage === 1 ? 0 : (currentPage - 1) * pageSize;\n        const endIndex = Math.min(currentPage * pageSize, moviesData.length);\n\n        for (let i = startIndex; i < endIndex; i++) {\n          const data = moviesData[i];\n          if (data.release_date === '') {\n            data.release_date = 'Sin aÃ±o registrado';\n          }\n          const baseImageUrl = 'https://image.tmdb.org/t/p/';\n          const moviePoster = `${baseImageUrl}w500${data.poster_path}`;\n          const genreNames = data.genres.map(genre => genre.name).join(' | ');\n          const movieHTML = `\n            <div class=\"photo-card\">\n              <div class=\"info\">\n                <a onclick=\"openModal('${data.id}')\" class=\"info__poster\">\n                  <img class=\"info__poster--img\" src=\"${moviePoster}\" alt=\"${data.title\n            }\" loading=\"lazy\" width=\"100px\" height=\"100px\" id=\"info__poster--img\" />\n                </a>\n                <h3 class=\"info__title\">\n                  <strong class=\"title\">${data.title}</strong>\n                </h3>\n                <p class=\"info__genre\">\n                  ${genreNames} | ${new Date(data.release_date).getFullYear()}\n                </p>\n                <p class=\"info-item\"></p>\n              </div>\n            </div>\n          `;\n          moviesHTML += movieHTML;\n        }\n\n        queueContainer.innerHTML = moviesHTML;\n      })\n      .catch(error => console.error(error));\n  }\n\n  function handlePageClick(event) {\n    if (event.target.tagName === 'LI') {\n      const clickedValue = event.target.innerText;\n      const clickedValueInt = parseInt(clickedValue);\n      if (clickedValue === '...') {\n      } else {\n        currentPage = clickedValueInt;\n        event.stopPropagation();\n        fetchMovies(currentPage);\n      }\n    }\n  }\n\n  ulPages.addEventListener('click', handlePageClick);\n\n  document\n    .getElementById('library__prev-page')\n    .addEventListener('click', async () => {\n      if (currentPage > 1) {\n        currentPage--;\n        await fetchMovies(parseInt(currentPage));\n        updateCurrentPageText(currentPage);\n      }\n    });\n\n  document\n    .getElementById('library__next-page')\n    .addEventListener('click', async () => {\n      if (currentPage < totalPages) {\n        currentPage++;\n        await fetchMovies(parseInt(currentPage));\n        updateCurrentPageText(parseInt(currentPage));\n      }\n    });\n\n  function updateCurrentPageText() {\n    const currentPageElement = document.getElementById('current-page');\n    currentPageElement.innerText = currentPage;\n  }\n}\n"],"names":["$4ukh0","parcelRequire","$9eef39ba584782b1$var$watchedBtn","document","getElementById","$9eef39ba584782b1$var$queueBtn","$9eef39ba584782b1$var$queueContainer","$9eef39ba584782b1$var$ulPages","querySelector","$9eef39ba584782b1$var$currentPage","$9eef39ba584782b1$var$totalPages","addEventListener","classList","remove","add","queueMoviesList","JSON","parse","localStorage","getItem","fetchPromises","map","movieID","fetch","API_KEY","then","response","json","fetchMovies","currentPage1","moviesHTML","Promise","all","moviesData","queueMoviesLength","length","Math","ceil","total_pages","li","$edlQ8","generatePages","innerHTML","startIndex","endIndex","min","i","data","release_date","moviePoster","poster_path","genreNames","genres","genre","name","join","movieHTML","id","title","Date","getFullYear","catch","error","console","updateCurrentPageText","innerText","event","target","tagName","clickedValue","clickedValueInt","parseInt","stopPropagation","async"],"version":3,"file":"myLibrary.18d99645.js.map"}